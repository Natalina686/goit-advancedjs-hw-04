{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49581187-5d65d3ee1f3e1ec6c0e5655f7\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0;\n\nexport async function fetchImages(query) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    totalHits = response.data.totalHits;\n    return response.data.hits;\n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    return [];\n  }\n}\n\nexport function setPage(newPage) {\n  page = newPage;\n}\n\nexport function getPage() {\n  return page;\n}\n\n\nexport function getTotalHits() {\n  return totalHits;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector(\".gallery\");\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery__item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p><b>‚ù§Ô∏è Likes:</b> ${likes}</p>\n          <p><b>üëÅ Views:</b> ${views}</p>\n          <p><b>üí¨ Comments:</b> ${comments}</p>\n          <p><b>‚¨áÔ∏è Downloads:</b> ${downloads}</p>\n        </div>\n      </li>\n    `\n    )\n    .join(\"\");\n\n  galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = \"\";\n}\n","import { fetchImages, setPage, getTotalHits, getPage } from \"./js/pixabay-api.js\";\nimport { renderGallery, clearGallery } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchForm = document.querySelector(\".form\"); \nconst loader = document.querySelector(\".loader\");\nconst galleryContainer = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet currentQuery = \"\";\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n\n  const query = event.target.elements.query.value.trim();\n  if (!query) {\n    iziToast.warning({\n      title: \"Warning\",\n      message: \"Please enter a search query!\",\n    });\n    return;\n  }\n\n  currentQuery = query;\n  setPage(1);\n  clearGallery();\n  loadMoreBtn.classList.add(\"hidden\");\n  showLoader();\n\n  try {\n    const images = await fetchImages(currentQuery);\n    if (images.length === 0) {\n      iziToast.error({\n        title: \"Error\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n      });\n    } else {\n      renderGallery(images);\n      loadMoreBtn.classList.toggle(\"hidden\", images.length < 15);\n    }\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Something went wrong. Please try again later!\",\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  setPage(getPage() + 1);\n  showLoader();\n\n  try {\n    const images = await fetchImages(currentQuery);\n    renderGallery(images);\n    const totalHits = getTotalHits();\n    const loadedImages = document.querySelectorAll(\".gallery__item\").length;\n\n    if (loadedImages >= totalHits) {\n      loadMoreBtn.classList.add(\"hidden\");\n      iziToast.info({\n        title: \"Info\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    smoothScroll();\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Something went wrong. Please try again later!\",\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction showLoader() {\n  loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n  loader.style.display = \"none\";\n}\n\nfunction smoothScroll() {\n  const cardHeight = document.querySelector(\".gallery__item\")?.getBoundingClientRect().height || 0;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n}\n"],"names":["API_KEY","BASE_URL","page","perPage","totalHits","fetchImages","query","url","response","axios","error","setPage","newPage","getPage","getTotalHits","galleryContainer","lightbox","SimpleLightbox","renderGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","searchForm","loader","loadMoreBtn","currentQuery","event","iziToast","showLoader","hideLoader","smoothScroll","cardHeight","_a"],"mappings":"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"}